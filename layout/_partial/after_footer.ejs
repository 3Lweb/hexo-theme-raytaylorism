<%- partial('plugin/google_analytics') %>
<%- partial('plugin/google_code_prettify') %>
<script>
    (function($) {
        //当内容区内容不够长时，设置内容区域的高度使footer沉底
        var resizeContentWrapper = function() {
            var contentHeight = Math.floor($('#content-wrapper .container-center').height()),
                headerHeight = Math.floor($('#page-header').height()),
                footerHeight = Math.floor($('#page-footer').height()),
                minHeight = Math.floor($(window).height() - headerHeight - footerHeight);
            if(contentHeight < minHeight) {
                $('#content-wrapper').height(minHeight);
            } else {
                $('#content-wrapper').css({height: 'auto'});
            }
        };

        //响应式侧边栏
        var initJPanelMenu = function() {
            var jPM = $.jPanelMenu({
                menu: '#jPanelMenu-menu-side',
                duration: 500
            });
            jPM.on();
        };

        //初始化目录按钮事件绑定
        var initCategory = function() {
            $('.menu-category').click(function() {
                var $jPanelMenu = $('#jPanelMenu-menu');
                var jPM = $.jPanelMenu({
                    duration: 500,
                    beforeOpen: function() {
                        $jPanelMenu.find('ul.category-menu').show();
                        $jPanelMenu.find('ul.main-menu').hide();
                    },
                    afterClose: function() {
                        $jPanelMenu.find('ul.category-menu').hide();
                        $jPanelMenu.find('ul.main-menu').show();                        
                    }
                });
                jPM.trigger();
            });
        };

        $(document).ready(resizeContentWrapper);
        $(document).ready(initJPanelMenu);
        $(document).ready(initCategory);
        
        $(window).resize(resizeContentWrapper);
    })(jQuery);
</script>