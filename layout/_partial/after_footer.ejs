<script src="<%- config.root %>js/jquery-2.0.3.min.js"></script>
<script src="<%- config.root %>js/materialize.min.js"></script>



<script>
    (function($) {
        $(document).ready(function() {
            // 图片缩放效果
            var $imgs = $('img').not('.slider-image').not('.avatar-image').not('.carousel-image');
            
            // 给图片加上点击放大效果（materialbox插件）
            $imgs.addClass('materialboxed')
                .each(function(i, el) {
                    $(this).attr('data-caption', $(this).attr('alt'));
                }).materialbox();
            
            // 首页幻灯片
            $('.slider').slider({
                indicators: false,
                full_width: true
            });
            
            $(".button-collapse").sideNav();
            $(".category-menu").sideNav();
            
            // 针对gallery post
            $('.carousel').carousel({full_width: true});
            $('.carousel-control.prev').click(function() {
                $('.carousel').carousel('prev');
            });
            $('.carousel-control.next').click(function() {
                $('.carousel').carousel('next');
            });
            
            // 文章目录
            $('article').not('.simple-article').find('h1').add('h2').add('h3').scrollSpy();
        });
    })(jQuery);

    (function($) {
        //初始化目录按钮事件绑定
        var initCategory = function() {
            function showMainMenu() {
                $('#category-menu').hide();
                $('Emain-menu').fadeIn();
            }

            function showCategoryMenu() {
                $('#main-menu').hide();
                $('#category-menu').fadeIn();
            }

            $('.category-menu').click(function() {
                // $('.button-collapse').first().sideNav('show');
                // showCategoryMenu();
                // var jPM = $.jPanelMenu({
                //     duration: 500,
                //     beforeOpen: function() {
                //         showCategoryMenu();
                //     },
                //     afterClose: function() {
                //         showMainMenu();
                //     }
                // });
                // if(jPM.isOpen()) {
                //     showCategoryMenu();
                // } else {
                //     jPM.open();
                // }
            });

            $('.category-menu').on('click', '.btn-back', function() {
                showMainMenu();
            });
        };

        $(document).ready(initCategory);
    })(jQuery);
</script>

<%- partial('plugin/google_analytics') %>
<%- partial('plugin/google_code_prettify') %>
<%- partial('plugin/mathjax') %>
